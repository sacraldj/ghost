# GHOST Orchestrator - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
**–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è**

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ —Ä–æ–ª—å

GHOST Orchestrator (`core/ghost_orchestrator.py`) - —ç—Ç–æ **—Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –º–æ–∑–≥** –≤—Å–µ–π –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã GHOST. –û–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–æ–ª—å "–¥–∏—Ä–∏–∂—ë—Ä–∞ –æ—Ä–∫–µ—Å—Ç—Ä–∞", –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É—è —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –∏—Ö —Å–ª–∞–∂–µ–Ω–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ.

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

```python
class GhostOrchestrator:
    """–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∏—Å—Ç–µ–º—ã GHOST"""
    
    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    config: Dict[str, Any]              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
    modules: Dict[str, ModuleConfig]    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –º–æ–¥—É–ª–µ–π
    module_status: Dict[str, ModuleStatus]  # –°—Ç–∞—Ç—É—Å—ã –º–æ–¥—É–ª–µ–π
    
    # –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã
    redis: aioredis.Redis              # –ö—ç—à –∏ –º–µ–∂–ø—Ä–æ—Ü–µ—Å—Å–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
    db_manager: DatabaseManager       # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
    notification_manager: NotificationManager  # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    system_monitor: SystemMonitor     # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤
    ghost_logger: GhostLogger         # –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 1. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –º–æ–¥—É–ª–µ–π (Lifecycle Management)**

#### –ó–∞–ø—É—Å–∫ –º–æ–¥—É–ª–µ–π:
```python
async def _start_modules(self):
    """–ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ"""
    # –¢–æ–ø–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º
    sorted_modules = self._topological_sort()
    
    for module_name in sorted_modules:
        if self.modules[module_name].enabled:
            await self._start_module(module_name)
            await asyncio.sleep(2)  # –ü–∞—É–∑–∞ –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –º–æ–¥—É–ª—è:**
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–≤—Å–µ –ª–∏ –Ω—É–∂–Ω—ã–µ –º–æ–¥—É–ª–∏ —É–∂–µ –∑–∞–ø—É—â–µ–Ω—ã)
2. ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. ‚úÖ –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å –ø–æ–º–æ—â—å—é `subprocess.Popen`
4. ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ PID –∏ —Å—Ç–∞—Ç—É—Å–∞
5. ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

#### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ–¥—É–ª–µ–π:
```python
async def _cleanup_module(self, module_name: str):
    """Graceful shutdown –º–æ–¥—É–ª—è"""
    # 1. –û—Ç–ø—Ä–∞–≤–∫–∞ SIGTERM (graceful shutdown)
    module_status.process.terminate()
    await asyncio.sleep(2)
    
    # 2. –ï—Å–ª–∏ –Ω–µ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
    if module_status.process.poll() is None:
        module_status.process.kill()
```

### 2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã (Health Monitoring)**

#### –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:
```python
async def _check_module_health(self, module_name: str):
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–æ–¥—É–ª—è"""
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –∂–∏–≤
    if module_status.process.poll() is not None:
        await self._handle_module_failure(module_name)
        return
    
    # –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞
    process = psutil.Process(module_status.pid)
    module_status.cpu_usage = process.cpu_percent()
    module_status.memory_usage = process.memory_info().rss / 1024 / 1024
    
    # –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å HTTP health check
    # await self._check_http_health(module_name)
```

**–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- üîç **–°—Ç–∞—Ç—É—Å –ø—Ä–æ—Ü–µ—Å—Å–∞** - —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –º–æ–¥—É–ª—å
- üìä **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU** - –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω –ª–∏ –º–æ–¥—É–ª—å
- üíæ **–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏** - –Ω–µ—Ç –ª–∏ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏
- ‚è±Ô∏è **–í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞** - HTTP health checks (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)
- üîÑ **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–≤** - –Ω–µ –∑–∞—Ü–∏–∫–ª–∏–≤–∞–µ—Ç—Å—è –ª–∏ –º–æ–¥—É–ª—å

### 3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ (Auto-Recovery)**

#### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–±–æ–µ–≤:
```python
async def _handle_module_failure(self, module_name: str):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–±–æ—è –º–æ–¥—É–ª—è"""
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
    if (module_config.restart_on_failure and 
        module_status.restart_count < module_config.max_restarts):
        
        # –ü–∞—É–∑–∞ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º
        await asyncio.sleep(module_config.restart_delay)
        
        # –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
        await self._cleanup_module(module_name)
        
        # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
        success = await self._start_module(module_name)
        if success:
            logger.info(f"‚úÖ Module {module_name} restarted successfully")
```

**–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:**
- üîÑ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫** - –¥–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞ –ø–æ–ø—ã—Ç–æ–∫
- ‚è∞ **–≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞** - —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏
- üìß **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö** - –≤ Telegram/email –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–±–æ—è—Ö
- üõ°Ô∏è **Graceful degradation** - –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º—ã—Ö –º–æ–¥—É–ª–µ–π –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö

### 4. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ (Dependency Management)**

#### –¢–æ–ø–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:
```python
def _topological_sort(self) -> List[str]:
    """–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞ –∑–∞–ø—É—Å–∫–∞ –º–æ–¥—É–ª–µ–π –ø–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º"""
    
    # –ú–æ–¥—É–ª–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ:
    # 1. news_engine (–Ω–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
    # 2. price_feed (–Ω–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)  
    # 3. supabase_sync (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç news_engine, price_feed)
    # 4. telegram_listener (–Ω–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
    # 5. signal_processor (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç telegram_listener)
    # 6. trade_executor (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç signal_processor)
```

**–ü—Ä–∏–º–µ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
```yaml
modules:
  trade_executor:
    dependencies: ["signal_processor", "ml_filtering"]
  signal_processor:
    dependencies: ["telegram_listener"]  
  ml_filtering:
    dependencies: ["news_engine", "price_feed"]
```

### 5. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (Centralized Logging)**

#### –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–æ–≤:
```python
async def _save_system_status(self):
    """–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –≤ Redis –∏ –ª–æ–≥–∏"""
    
    status_data = {
        'timestamp': datetime.utcnow().isoformat(),
        'orchestrator_status': 'running',
        'system_metrics': self.system_metrics,
        'modules': {
            name: {
                'status': status.status,
                'health': status.health_status,
                'cpu_usage': status.cpu_usage,
                'memory_usage': status.memory_usage
            }
            for name, status in self.module_status.items()
        }
    }
    
    # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Redis –¥–ª—è API
    await self.redis.setex('ghost:orchestrator:status', 300, json.dumps(status_data))
```

**–£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**
- üîç **DEBUG** - –ø–æ–¥—Ä–æ–±–Ω–∞—è –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- ‚ÑπÔ∏è **INFO** - –æ–±—ã—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–∑–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ–¥—É–ª–µ–π)
- ‚ö†Ô∏è **WARNING** - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–≤—ã—Å–æ–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤)
- ‚ùå **ERROR** - –æ—à–∏–±–∫–∏ (—Å–±–æ–π –º–æ–¥—É–ª—è, –ø—Ä–æ–±–ª–µ–º—ã —Å –ë–î)
- üö® **CRITICAL** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ (–æ—Ç–∫–∞–∑ —Å–∏—Å—Ç–µ–º—ã)

### 6. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (Configuration Management)**

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
```yaml
# config/system_config.yaml
orchestrator:
  check_interval: 10          # –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–æ–¥—É–ª–µ–π (—Å–µ–∫)
  max_restarts: 3            # –ú–∞–∫—Å–∏–º—É–º –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–≤
  health_check_timeout: 30   # –¢–∞–π–º–∞—É—Ç health check

modules:
  news_engine:
    enabled: true
    command: ["python3", "enhanced_news_engine.py"]
    working_dir: "news_engine"
    restart_on_failure: true
    max_restarts: 3
    restart_delay: 5.0
    dependencies: []
    environment:
      PYTHONPATH: ${PYTHONPATH}
    resources:
      cpu_limit: 1.0
      memory_limit: 512  # MB
```

### 7. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏**

#### Redis (–∫—ç—à –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ):
```python
# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –º–æ–¥—É–ª—è
await self.redis.setex(
    f'ghost:module:{module_name}:status',
    300,  # TTL 5 –º–∏–Ω—É—Ç
    json.dumps(status_data)
)

# –ú–µ–∂–ø—Ä–æ—Ü–µ—Å—Å–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
await self.redis.publish('ghost:events', json.dumps({
    'type': 'module_restarted',
    'module': module_name,
    'timestamp': datetime.utcnow().isoformat()
}))
```

#### Supabase (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö):
```python
# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π —Å–∏—Å—Ç–µ–º—ã
await self.db_manager.log_system_event({
    'event_type': 'module_failure',
    'module_name': module_name,
    'error_message': error_message,
    'timestamp': datetime.utcnow(),
    'restart_count': restart_count
})
```

## üîÑ –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞

### –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª:
```python
async def _main_loop(self):
    """–û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞"""
    check_interval = self.config['orchestrator']['check_interval']
    
    while self.running:
        try:
            # 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
            await self._check_modules_health()
            
            # 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
            await self._update_system_metrics()
            
            # 3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –≤ Redis
            await self._save_system_status()
            
            # 4. –û–∂–∏–¥–∞–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏
            await asyncio.sleep(check_interval)
            
        except Exception as e:
            logger.error(f"Error in main loop: {e}")
            await asyncio.sleep(check_interval)
```

### –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞:
1. üìã **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** - –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Redis/–ë–î
2. üîó **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤** - Redis, Supabase, —Å–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
3. üìä **–ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞** - —Å–∏—Å—Ç–µ–º–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä, health checks
4. üöÄ **–ó–∞–ø—É—Å–∫ –º–æ–¥—É–ª–µ–π** - –≤ –ø–æ—Ä—è–¥–∫–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
5. üîÑ **–û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª** - –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
6. üõë **Graceful shutdown** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –°–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:
```python
self.system_metrics = {
    'start_time': datetime.utcnow(),
    'total_restarts': 0,           # –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–≤
    'uptime': 0,                   # –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã
    'modules_healthy': 0,          # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–¥–æ—Ä–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π
    'modules_total': 0,            # –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–¥—É–ª–µ–π
    'cpu_usage_avg': 0.0,         # –°—Ä–µ–¥–Ω—è—è –Ω–∞–≥—Ä—É–∑–∫–∞ CPU
    'memory_usage_total': 0.0,     # –û–±—â–µ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
    'errors_last_hour': 0,         # –û—à–∏–±–∫–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å
    'performance_score': 100.0     # –û–±—â–∏–π –±–∞–ª–ª –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
}
```

### API –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞:
```typescript
// GET /api/system/status
{
  "orchestrator_status": "running",
  "uptime": 3600,
  "modules_summary": {
    "total": 10,
    "running": 8,
    "healthy": 7,
    "failed": 1
  },
  "system_health": {
    "overall_status": "healthy",
    "health_score": 85,
    "issues": ["High memory usage in ml_filtering module"]
  }
}
```

## üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –∞–ª–µ—Ä—Ç—ã

### –¢–∏–ø—ã –∞–ª–µ—Ä—Ç–æ–≤:
1. **üî¥ CRITICAL** - –ø–æ–ª–Ω—ã–π –æ—Ç–∫–∞–∑ —Å–∏—Å—Ç–µ–º—ã
2. **üü† HIGH** - –æ—Ç–∫–∞–∑ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ–≥–æ –º–æ–¥—É–ª—è
3. **üü° MEDIUM** - –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ —Ä–µ—Å—É—Ä—Å–æ–≤
4. **üîµ LOW** - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

### –ö–∞–Ω–∞–ª—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:
- üì± **Telegram** - –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã –∞–¥–º–∏–Ω–∞–º
- üìß **Email** - –¥–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á—ë—Ç—ã –æ–± –æ—à–∏–±–∫–∞—Ö
- üîó **Webhook** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- üìù **Logs** - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π

## üéõÔ∏è –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ß–µ—Ä–µ–∑ API:
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –º–æ–¥—É–ª—è
curl -X POST /api/system/control \
  -d '{"action": "restart_module", "module": "news_engine"}'

# –ü–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤
curl -X POST /api/system/control \
  -d '{"action": "get_logs", "module": "trade_executor", "lines": 100}'

# –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
curl -X POST /api/system/control \
  -d '{"action": "update_config", "module": "ml_filtering", "config": {...}}'
```

### –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç:
```bash
# –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã
./start_orchestrator.sh start

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
./start_orchestrator.sh status

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
./start_orchestrator.sh restart

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
./start_orchestrator.sh logs
```

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
1. **ü§ñ AI-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —Å–±–æ–µ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–µ—Ç—Ä–∏–∫
2. **üìà –ê–≤—Ç–æ–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ** - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
3. **üîÑ Rolling updates** - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥—É–ª–µ–π –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–∏—Å—Ç–µ–º—ã
4. **üåê –†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ** - –∑–∞–ø—É—Å–∫ –º–æ–¥—É–ª–µ–π –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö
5. **üìä Advanced analytics** - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

---

–≠—Ç–æ –∏ –µ—Å—Ç—å **"–º–æ–∑–≥"** –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã GHOST - –æ–Ω –∑–Ω–∞–µ—Ç –æ –∫–∞–∂–¥–æ–º –º–æ–¥—É–ª–µ, —Å–ª–µ–¥–∏—Ç –∑–∞ –∏—Ö –∑–¥–æ—Ä–æ–≤—å–µ–º, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–∏ —Å–±–æ—è—Ö –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ–π —Å–ª–æ–∂–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π!
